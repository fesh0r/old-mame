0.141u2
-------


MAMETesters Bugs Fixed
----------------------
- 04225: [Sound] gangwars: Samples incorrectly played (Tafoid)
- 04221: [Misc.] chryangl: Incorrect sizes listed in source.
- 04215: [Graphics] quizf1: missing graphics in a startup screen 
         (robiza)
- 04214: [DIP/Input] grobda, motos, phozon: No directional controls 
         available for second player (Tafoid)
- 04107: [Save/Restore] All sets in aristmk4.c: Unable to write save 
         state (Fabio Priuli)
- 04202: [Sound] asteroid, llander and clones (+ others): Discrete sound 
         missing/broken (Derrick Renaud)



Source Changes
--------------
arm7: Fix for "MOV LR, Rx" (where Rx bit 0 = 1) + "F800" situation.
This fixes the lockup in GBA "Golden Sun: The Lost Age".
[Tim Schuerewegen]

SSV: Hook up uPD96050 (ST-010) math/protection DSP [R. Belmont]

[mysticrib] added one opcode and fixed music and sound
[Roberto Zandona']

Fixed DISCRETE_WAVLOG & DISCRETE_RCFILTER fixing dkongjr and likely
other sounds. [Derrick Renaud]

intelfsh: Support flash ROMs that have a bankswitch command
[Tim Schuerewegen]

Fixed banking in daytona2 by adding a second aperture to CROM at
0xc3000000. A couple of CROMs checksum as bad, but most come out good.
[Aaron Giles]

A new WE DSP16A cpu disassembler.  [Andrew Gardner]

Added a preliminary Softlist support for Sega Megatech, that allows
multi-cart support. syntax is (similar to the MESS one)
mame megatech -cart1 mt_beast -cart2 mt_soni2 ... -cart8 mt_shar2
SMS games have issues when moving between games, so stick to only
a single SMS game for now or the z80 will crash. [David Haywood]

Fix missing sound channel in beezer; sound should now be more or less
correct, but the noise source still isn't accurate yet.
[Lord Nightmare]

Improved beezer volume DAC handling to be accurate to hardware.
[Lord Nightmare]

quizf1: added opcodes [Roberto Zandona']

C++-ified the sound and streams interfaces. Combined sound.c and
streams.c into one file, and separated the speaker device into its own
file. Generalized the concept of dynamically assigned inputs and
re-wired the speaker to work this way, so it is now treated just like
any other sound device. Added methods to the device_sound_interface
for controlling output gain and mapping device inputs/outputs to
stream inputs/outputs. Also made the sound_stream_update() method pure
virtual, so all modern sound devices must use the new mechanism for
stream updates. [Aaron Giles]

Clean up megatech.xml. [Fabio Priuli, David Haywood]

Clean up natural keyboard support. [Atari Ace]

Eliminated static/global variables in a number of Atari drivers by
moving them into a driver_device. [Atari Ace]

Fixed Metal Slug 6 ROM mirror, game is fully playable [Cah4e3]

Fix a bug in palette_normalize_range which caused color distortion.
The luminance normalization now converts r,g,b to y,u,v and normalizes
y prior to converting back to r,g,b. This affects e.g. radarscp, dkong
and mario drivers. [Couriersud]

Modernized the DSP32 core. [Aaron Giles]

Rewrote video routines and fixed partial updates in the Dottori Kun
driver [Angelo Salese]

Added all CPU and sound devices in emu folder to the MAME build.
[Curt Coder]

arm7: [Tim Schuerewegen]
 - Improved LDM/STM unaligned word access in THUMB mode.
 - Fixed LDM unaligned read in THUMB mode.

Imported the MC68901 device from MESS so it can be shared with
micro3d.c. [Curt Coder]

ksys573: Hook up part of the i2c communication with the mas3507d.
[O. Galibert]

Renamed bishjan.c to subsino2.c [Luca Elia]
 * Implemented reel layer
 * Fixed rogue tiles in xplan
 * Hopper emulation in bishjan

m90: fixed line scroll [Roberto Zandona]

ARM7: Fix an LDM base register write-back bug. [Tim Schuerewegen]

Added correct LA revision levels to the Pigskin 621AD rom set as well
as including the date in the game titles of Arch Rivals and Pigskin
621AD sets. [The Dumping Union]

Fixed interrupt vector in F8 CPU core [Sandro Ronco]

namcops2: Added dumped key for Ridge Racer V RRV3 Ver. A [Guru]

Converted TMS3203X to a modern device. [Aaron Giles]

Removed redundant m_machine from the state and execute interfaces
to fix ambiguity when using m_machine from within a device that
inherits from these. [Aaron Giles]

beezer now uses correct mm5837 noise source (clock may be a bit off
though), and now has mm5837 properly hooked to audio via. May still be
some issues with intermittent noise updating which need fixing.
[Lord Nightmare]

Improvements to Magic's 10 driver. [Roberto Fresca]
 * New inputs from the scratch for Music Sort.
 * Complete DIP Switches and DIP locations for Music Sort.
 * Added a new button-lamps layout for Music Sort.
 * Created a default NVRAM that allow Music Sort work properly.

NetBSD support [Thomas Klausner]

pollux: fixed sprite flip x and y and removed old comments
[Roberto Zandona']

Converted attotime to a class, with proper operators. Removed old
global functions which are now superceded by the operators and methods
on the class. [Aaron Giles]

Eliminated global/static variables in a number of Taito/Irem drivers 
by introducing/using driver_device classes. [Atari Ace]

Cleaned up shared implementation of CDi [David Haywood]
 * merged MESS CDi driver file with the MAME CDi driver file (used for
    Quizard)
 * the cdimono1 system is now the parent / bios of Quizard, the Quizard
    games run on a retail CDi unit with Jamma adapter / dongle for
    protection so this is a logical step.

Replaced anonymous timers used in video/segaic16.c, drivers/segaorun.c
and drivers/segaxbd.c with allocated timers, making it possible to add
save state support to these drivers.  [Alex Jackson]

Updates to cave.c and toaplan2.c: [Alex Jackson]
 * Added savestate support to all games in cave.c. Most of the work
    was already done by someone else; the blocker was a
    perpetually-running anonymous timer, which I converted to an
    allocated timer.
 * Changed OKI sample banking to use device address maps instead of
    memcpy() in all cave.c games except the nmk112-based games. If
    someone wants to try to convert nmk112.c to use device address
    maps and bank pointers, be my guest--you'll need 8 banks of
    varying sizes per OKI chip...
 * Fixed description of the Japanese Air Gallet set--the game's
    Japanese title is "Akuu Gallet".
 * Made machine/nmk112.c actually restore its state properly. Also
    refactored it a little (if you can talk about refactoring a source
    file that almost fits on one screen)
 * Fixed bgaregga's nmk112 interface to work with the refactored
    nmk112.c.
 * Removed excessive CPU interleaving from batsugun, left over from
    when I was initially hooking up the V25.
 * Removed a useless printf and some obsolete comments, more leftovers
    from the process of hooking up the V25.

Added MCFG_SCREEN_RAW_PARAMS to twincobr.c and wardner.c, correcting
their refresh rates.  [Alex Jackson]

Add basic LOAD function to the debugger to complement the existing
SAVE function. It allows you to load a binary file straight into
writeable memory.  The format is the same as the SAVE function with
the exception that the <length> can be handled differently.  [Pugsy]

68681 patch to fix dectalk's startup test in MESS [Hans Ostermeyer]

drcuml: fix compile on systems that use the C backend [R. Belmont]

Reimplemented fruit-machine mechanical meters to use timers [AGEMAME]

Various MPU4 changes [AGEMAME]:
 * Revised timing/input system to stop flickering
 * Tidied up the LED drawing code to remove flicker
 * Support for all known extenders and reel multiplex boards used in
    MPU4 H/W
 * Partial support for OKI sampled sound card, need for some titles
 * Fixed Old Timer characteriser
 * Some general tidying up to allow better study of the BwB titles

Implemented proper mouse wheel event handling in the Windows debugger.
[Curt Coder]

Convert emu_timers to objects. Moved implementation and management of
timers into the scheduler. Retain TIMER devices as a separate wrapper
in timer.c/.h. Rather than using macros which hide generation of a 
string-ified name for callback functions, the new methods require 
passing both a function pointer plus a name string. A new macro 
FUNC() can be used to output both, and another macro MSTUB() can be 
used to output a stub-wrapped class member as a callback. [Aaron Giles]

Added a time() method on the machine, so that machine->time()
gives the current emulated time. [Aaron Giles]

Added methods to the device_t class that make creating and managing 
device timers much simpler. Modern devices were updated to use these.
[Aaron Giles]

Ensured that the debugger disassembly PC cursor is visible on startup.
[Curt Coder]

Made changes to the PORT_ADJUSTER values for MSM5232 clocks in all
games in drivers to best match PCB recordings.  [Fujix, Tafoid]

Removed cpuexec_describe_context, cpuexec_boost_interleave, 
cpuexec_trigger, and cpuexec_triggertime in favor of calls to the
scheduler. [Aaron Giles]

tms57002: significantly improved build speed on lower-end h/w
[R. Belmont]

G65816: fixed operation on PowerPC Linux where char is unsigned
[R. Belmont, billb]

Move generic templates from emucore.h to emutempl.h. Normalize the
tagged_list template to wrap a regular standard_list and have similar
semantics. Updated a few direct callers to handle the changes.
[Aaron Giles]

sigmab98: fixed zooming, added priorities and flipping [Luca Elia]

Moved the state saving system to C++. For now the registration macros
are still intact. The new state_manager class has templatized methods
for saving the various types, and through template specialization can
save more complex system types cleanly (like bitmaps and attotimes).
Added NAME() macro which is a generalization of FUNC() and can be used
to wrap variables that are registered when directly using the new
methods as opposed to the previous macros. [Aaron Giles]

Added new mechanism to detect proper state save types. This is much
more strict and there will likely be some games/devices that
fatalerror at startup until they are remedied. Spot checking has
caught the more common situations. [Aaron Giles]

Added methods in the device_t class that implicitly register state
against the current device, making for a cleaner interface. Bulk
updated existing devices and drivers with driver_device classes to
use these methods. [Aaron Giles]

cps1.c: CPS-1 update [Team CPS-1]:
 * Added Tenchi wo Kurau (Japan Resale Ver.)
 * Confirmed B-Board # for chikij, added ROMs positions, PALs and some
    pcb infos to video\cps1.c
 * Fixed sf2uk labels and added pcb infos
 * Identified and documented willowje as an early and genuine USA
    release, added a note and renamed willowje -> willowo
 * Verified and fixed XTALs of Japan Resale Versions to work at 12MHz,
    they all use DASH A-Boards
 * Minor cleanups and fixes

Migrated allocated buffers to arrays in the driver_data classes of
several drivers. [Aaron Giles]

Made "run to next CPU" more reliable. [Aaron Giles]

Fix memory manager bug when calling 32-bit handlers on a 64-bit
address space. [Aaron Giles]



New games added or promoted from NOT_WORKING status
---------------------------------------------------
Express Card / Top Card [Smitdogg, The Dumping Union, Luca Elia]
Magic Train [Grull Osgo, Roberto Fresca, David Haywood, Luca Elia]
X-Train [Smitdogg, The Dumping Union, Luca Elia]
Music Sort (ver 2.02, English) [Roberto Fresca, Team Europe]
18 Wheeler [hap, Siftware]
Animal Catch
  [Luca Elia, Gnoppi, john666, Gerald (COY), Smitdogg, The Dumping Union]
Itazura Monkey
  [Luca Elia, Gnoppi, john666, Gerald (COY), Smitdogg, The Dumping Union]
California Games (Mega-Tech)
  [f205v, incog, Smitdogg, The Dumping Union]



New clones added
----------------
Space Bomber [hap, N. Francfort, Smitdogg, The Dumping Union]
Top Skater (Japan) [Pat Daderko]
Prehistoric Isle in 1930 (Korea) [Artemio Urbina
Zero Hour (set 2) [Andrew Welburn, The Dumping Union]
Prehistoric Isle in 1930 (Korea) [Artemio Urbina
Hidden Catch 2 (pcb ver 1.00) (Kor/Eng/Jpn/Chi)
  [Yohji, Smitdogg, The Dumping Union]
Tenchi wo Kurau (Japan Resale Ver.)
  [J. Finney, italie, john666, Yohji, Smitdogg, The Dumping Union]
Red Earth / Warzard (961023) [Smitdogg, The Dumping Union]
Double Dribble (prototype?) [Smitdogg, The Dumping Union]
Tetris Plus 2 (Japan, V2.1) [Yohji, Smitdogg, The Dumping Union]
Violent Storm (ver AAB) [Denis Lechevalier]
Black Tiger (older) [David Raingeard]



New games marked as GAME_NOT_WORKING
------------------------------------
Metal Slug 6 [Guru]
Evil Night (ver UBA) [Guru]
Oinori-daimyoujin Matsuri
  [Yohji, Kevin Eshbach, R. Mucciarelli, Cah4e3, The Dumping Union]
Funky Ball [krick, incog, Smitdogg, Guru, The Dumping Union]
Reno Reels (20p/10GBP Cash, release A) [AGEMAME]
BwB Tetris v 2.2 [AGEMAME]
Red Hot Poker (20p/10GBP Cash, release 3) [AGEMAME]
Samurai Spirits Tenkaichi Kenkakuden [Guru]
Pye-nage Taikai
  [Gnoppi, john666, Gerald (COY), Smitdogg, The Dumping Union]
Hae Hae Ka Ka Ka
  [Gnoppi, john666, Gerald (COY), Smitdogg, The Dumping Union]
Taihou de Doboon
  [Gnoppi, john666, Gerald (COY), Smitdogg, The Dumping Union]
Dream Fruit [Yohji, Smitdogg, The Dumping Union]
NeopriSP Retro Collection [Yohji, Smitdogg, The Dumping Union]
Last Bank [Yohji, Smitdogg, The Dumping Union]



0.141u1
-------


MAMETesters Bugs Fixed
----------------------
- 04199: [Documentation] barbball: Typo in title
- 01879: [Graphics] All sets in toaplan2.c: Cocktail mode (Player 2) 
         has no background images (David Haywood)
- 01004: [Graphics] chinhero, chinhero2, chinherot: There is a bad 
         sprite on level 7 of the game. (Pierpaolo Prazzoli)
- 02111: [Graphics] madalien, madaliena: Missing lightup when enemies 
         explode in dark
- 02041: [Sound] smgp and clones: Voice samples incorrectly played (hap)
- 00992: [Sound] hangon: The pitch of the engine sound is wrong (hap)
- 03460: [Color/Palette] starfire, starfirea: Incorrect color at bottom 
         of screen
- 04190: [Color/Palette] heiankyo: wrong colors (hap)
- 02080: [Sound] armedf: DAC Chip playing Orchestra Hit Sample too low 
         (hap)
- 03501: [Sound] batsugun, batsuguna, batsugunsp: Missing music and some 
         sound effects (Alex Jackson)
- 04147: [Crash/Freeze] raiden: crashes if you use -debug switch 
         (Alex Jackson)
- 03808: [Graphics] starsldr, vivdolls: Garbled screen (MooglyGuy)
- 04079: [Crash/Freeze] mtrain: Access Violation before OK (Luca Elia)
- 04178: [Documentation] cmmb162: Year should be 2002
- 00865: [Graphics] blandia: In Jurane stage, the whole bottom of the 
         screen is filled with solid gray. (Pierpaolo Prazzoli)
- 04180: [Crash/Freeze] dunkmniaj: To key press "OK" the game has only a 
         blue screen. (Tafoid)
- 02883: [Debugger] debugger: Pressing F10 (Step Over) occasionally 
         causes Debug menu to light up (hap)
- 04165: [Crash/Freeze] vbowl, vbowlj: Crash after OK
- 04166: [Crash/Freeze] arabian, arabiana: After several cycles of the 
         attact mode, the game halts (Phil Bennett)



Source Changes
--------------
Added Rockwell PPS4 CPU core (not finished) [Miodrag Milanovic]

Added GAME_MECHANICAL flag to mark games having mechanical
interface (such as pinball, redemption, bowling games ...)
Imported games from PinMAME as skeletons. [Miodrag Milanovic]

Removed fast IMEM and DMEM handlers from the RSP DRC in favor of the
core memory system; fixes RSP DRC on 32-bit targets. [Harmony]

Changed DMADAC interleave in the Aleck 64 driver from 2 to 1; fixes
monaural and poppy audio. [Harmony]

ARM7: fix for "39in1" (MAME) and removed a duplicate line 
[Tim Schuerewegen]

Hooked up preliminary Seibu COP macro command 0x6200, used on SD
Gundam Rainbow Tairiku Senki for the Homing weapon [Angelo Salese]

ARM7+: Various cycle timing fixups [Tim Schuerewegen]

39in1: Fix to work with newer ARM7 cores [Tim Schuerewegen]

MIPS: make DRC selectable by #ifdef [R. Belmont]

Fixed BADCOP exception handling in the MIPS III interpreter.
[MooglyGuy]

Fixed midground banking in Raiden 2 [Angelo Salese]

Implemented DMA slot concept to the Raiden 2 driver, giving correct
sprite tables for X Se Dae and Zero Team [Angelo Salese]

Fixed start-up banking in Raiden DX [O. Galibert]

Implemented Seibu COP macro command 0x904 (variant of 0x905), used on
X Se Dae and Zero Team. [Angelo Salese]

Implemented program bank read-back in Raiden 2, allowing it to not
crash anymore during attract / gameplay [Angelo Salese]

Fixed Compare interrupts in the MIPS III interpreter core.  Aleck 64
games can now run under the MIPS III interpreter. [Harmony]

Implemented proper TLB handling in the MIPS III interpreter. [Harmony]

cb2001: some gfx improvements [David Haywood]

Fixed Seibu COP command 0x7e05, used by Raiden DX fg video banking
[Angelo Salese]

osd/sdl again compiles against latest SDL 1.3 svn. [Couriersud]

Enabled flipscreen in Mr. Dig [Pierpaolo Prazzoli]

Implemented "-watchdog" option for SDLMame. [Couriersud]

"Copy-and-Paste" the "-bench" option from win32 to sdl. [Couriersud]

Add uPD7725 16-bit DSP core and hookups for SNES hardware
[byuu, R. Belmont]

Removed no longer needed SNES HLE code [R. Belmont]

Added support for MSB shadows in STV VDP2. This improves
Soukyugurentai shadows [Mariusz Wojcieszek]

Fixed RSP core VRSQL implementation. [Harmony]

spaceg.c improvements: [hap]
 * less garbage trails, though it's not completely good yet
 * fixed jerky x-movement
 * fixed crash on loadstate
 * marked color proms as undumped

New Namco 62xx device with internal ROM. 
[Dr. Decapitator, Phil Bennett, Andrew Gardner]

MIPS3 DRC: Fix case where branch delay slot straddles a page 
boundary and the page check confirms that the block is paged in.
[Aaron Giles]

Correct Coin Mode & Coinage for Heavy Unit (World) [Brian Troha, Guru]

makedep now ignores "-include" which is used by sdlmame to include
sdlprefix.h before all other includes. [Couriersud]

Remove "makedep" stuff from sdl.mak now that the core supports it.
Also split sdl-config output between INCPATH and CCOMFLAGS for linux
targets. makedepend now works. [Couriersud]

Fixed rendering of not rotated RBG layer in STV VDP2. This fixes
garbage on level 4 of Soukyugurentai [Mariusz Wojcieszek]

Added dipswitch locations to moo.c, mystston.c, mystwarr.c, prehisle.c
and pushman.c drivers [Brian Troha]

Added dipswitch locations to jchan.c driver [Brian Troha]

MIPS3 DRC: Include delay slots in checksum calculations.
[Aaron Giles]

C++-ified drcfe and the associated frontends. You now create a
frontend by deriving from drc_frontend and implementing the describe
method. [Aaron Giles]

Added support for MSB enabled color calculation for sprites in STV.
This improves some sprites in Soukyugurentai [Mariusz Wojcieszek]

Start moving the discrete subsystem towards C++. Changed some structs
to classes and most of the list processing now uses a linked list
template which is type-safe. [Couriersud]

Improved sprite-tile priorities in SD Gundam Sangokushi Rainbow
Tairiku Senki [David Haywood]

V25: fix false warnings from some GCC versions [R. Belmont]

Improve TLB mismatch handling in PPC DRC, so that if we fill from an
empty entry, we re-dispatch to previously compiled code instead of
always recompiling the target. This greatly reduces the DRC overhead
on 603-based games. [Aaron Giles]

Moved MESS RAM device into emu core. Added COMP and CONS macros in 
driver.h [Miodrag Milanovic]

Marking mechanical games as such in XML [Miodrag Milanovic]

Moved image devices implementation and related UI functions to emu
section from MESS [Miodrag Milanovic]

Converted drccache to C++. [Aaron Giles]

Flagged a number of existing gamesi n MAME with GAME_MECHANICAL to
indicate the presence of un-emulatable mechanical parts. [Tafoid]

Preliminary implementation of the Seibu COP palette brightness mode 4,
used by Denjin Makai fade in/out effects [Angelo Salese]

Redumped PSAC2 rom in Rushing Heroes [Smitdogg, The Dumping Union]

z80.c: Allow daisy chain functionality to be used in a situation where
there are more interrupt sources besides the daisy chain devices.
[Wilbert Pol]

Redumped sprite roms in Rushing Heroes [Smitdogg, The Dumping Union]

Added HD61700 CPU core used for emulate Casio PB-1000/PB-2000c in MESS
[Sandro Ronco]

Work around for Seibu COP command 0x8100 / 0x8900, used in all games
for direction of objects. Fixes many sync bugs in all legionna.c /
raiden2.c games [Angelo Salese, Tomasz Slanina]

Fixed sprite flickering and stage 5 crash in Raiden 2 [Angelo Salese]

Build vconv in all circumstances as part of win32 build. Always use
gcc to build vconv. Add missing extern "C" to intrinsic definitions.
Change vconv to call link.exe instead of lib.exe for libraries.
[Aaron Giles]

Fixed background gfx issues in later levels of Raiden 2 
[Angelo Salese]

Added SBY line read to SP0256 interface. [Curt Coder]

Implemented Seibu Audio variant with a single YM2151 sound chip,
giving working sound to Air Raid [Angelo Salese]

bishjan.c update [Luca Elia]
 * Implemented dynamic tile sizes
 * Generalized video routines to support more layers
 * Moved mtrain in from subsino.c

Fixed BCD score display bug in Raiden 2 and Zero Team [Angelo Salese]

naomi.c: Documentation additions [f205v]

Added dipswitch locations for Zodiack [Brian Troha]

Corrected play speed on Mr. Kicker.  [David Haywood]

Added CHD support in softlists [Miodrag Milanovic]

Fixed handling 80186 instructions [Phill Harvey-Smith]

SDL OS/2 fixes [K.O. Myung-Hun]

naomi: support texture stride selection [O. Galibert]

Corrected bitmap palette number for RBG0 in STV VDP2. This fixes
colors in boss gfx in Soukyugurentai level 4 & 5 [Mariusz Wojcieszek]

Fixed some input issues in meosism, vasara, vasara2 and twineag2
(ssv.c)  [Tafoid]

Correct grom01.bin BAD_DUMP in Golden Par Golf [MASH]

Discrete sound system:
 * all nodes are now class based
 * removed all support for "legacy", i.e. procedural node functions.
 * nodes are created using a class factory whose instances are set up
    in discrete blocks. There is no separation of node vs. module any
    longer.
 * Custom modules are now just implemented like "normal" nodes.
 * Converted all custom modules.
- Context variables can now be migrated to be private class members.
[Couriersud]

cheat.c: added support for cheats with software list shortnames
[Fabio Priuli]

video.c: added support for a new template to -snapname so that it is
possible to use the name of images mounted in the devices (for MESS).
Namely, it is now possible to use %d_XXXX to prescribe usage of the
image mounted in the device XXXX. [Fabio Priuli]

clifront.c: improved the behavior of -listsoftware by updating DTD, by
adding output of most missing elements and attributes (softlist
description, features & diskdata) and by fixing size and offset
formats [Fabio Priuli]

clifront.c: added remaining loadflags to -listsoftware output
[Fabio Priuli]

Fixed an ARM7 R15 bit ignoring behaviour while in ARM state, fixes
Lupin the Third: the Typing ARM crashing when you coin it up.
[Tim Schuerewegen]

softlist.c: added best match suggestions to software lists
[Fabio Priuli]

softlist.c: only output best match if a list is present, limit the
scan for best match to the devices with the same interface and fixed a
corner case with shortname=listname [Miodrag Milanovic]

romload.c: added support for split set to softlist (for cart, cd and
hd) [Fabio Priuli]

devimage.c: added support for split set to softlist for cass and flop
too [Fabio Priuli]

allow software lists to look for files in the rompath too
[Fabio Priuli]

Figured out and made comments of math tables in roms 14/15 of Seibu
Cup Soccer bootleg inside machine/seicop.c [O. Galibert]

SSV: improvements to flipscreen support [Roberto Zandona']

H8: Fix unterminated string buffer [R. Belmont, Belegdol]

clifront.c: added "-lsoft" option as short version of "-listsoftware"
[Fabio Priuli]

clifront.c: prevented -lsoft from output DTD if no list is found
[Fabio Priuli]

Placed full megadrive code in MAME section [David Haywood]

softlists: added WARNING if loading a software with
supported="partial" or "no" [Fabio Priuli]

model3: redumped Daytona 2 Battle on the Edge CROMs [Guru]

Added FSAVE mode 2 support to the M68040 FPU. [Barry Rodewald]

ssv: improvements to the sprite position [Roberto Zandona']

SH4: cleanup and better common/interpreter separation [R. Belmont]

Documentation update to beezer driver for facilitating future sound
work [Lord Nightmare]

Add missing XYZ latch readback on beezer, gets sound closer to working
[Lord Nightmare]

SH4: Port preliminary SH3 support from DRC.  [R. Belmont]

Discrete subsystem: [couriersud]
 * all list handling now based on dynamic_array_t (discrete.h)
 * more code rewrite to get rid of fixed allocations.
 * performance about the same as 0.140

Added a mostly complete NEC V25/V35 CPU core, added working sound to
Batsugun and hooked up proper V35-controlled interrupts in Cosmic Cop
/ Gallop and Kengo [Alex Jackson]

Implemented proper RNG mechanism in Seibu COP emulation
[Tomasz Slanina, Angelo Salese]

romload.c: implemented handling of parent-clone CHDs in software lists
[Fabio Priuli]

bfm_sc2.c: Removed old-style NVRAM handlers in preparation for
mechanical game support [AGEMAME]

MPU4 Changes: [AGEMAME]
 * Added fix for lamp 'open circuit' errors which in turn make Connect
    4 work better.
 * Fixed layout typo that caused the wrong piece to be displayed in
    Connect 4.
 * Documented the DUART and PTM better in MPU4 to allow for sampled
    sound changes later.
* Changed 'serial_card_connected_ to link 7a, as it is the jumper on
    the ROM card that changes the IRQ priority, not the serial 
    interface itself.

dogyuun: decrypted some opcodes [Roberto Zandona']

raiden2: Command 0205 changes data at +1c too [dox, O. Galibert]

raiden2: First stab at a cop "disassembler" [trap15, O. Galibert]

Redo most of the DRC/backend support as C++. Yes, it is intentional 
that the x86/x64 backends compile everywhere. Backends are now 
derived from drcbe_interface and implement several required overrides.
x86emit.h now uses namespaces so that the x86/x64 emitters can
co-exist. New file uml.h/uml.c actually describes the UML language, 
separating out several concepts from drcuml.c. [Aaron Giles]

Cleaned up clocks of mid to late 80s Nichibutsu non-Mahjong games.
Though not completely accurate yet, this should improve music speed
and DAC audio pitch a bit. [hap]

romload.c: made -bios option case insensitive [Fabio Priuli]

starfire.c: Improved color emulation and added driver data [Qwi Jibo]

toaplan2:
 * found a lot more kbash opcodes by matching code with batsugun's
    [Alex Jackson]
 * correct m68k and v25 address maps for kbash [Alex Jackson]
 * corrected truxton2 program ROM [Alex Jackson]

fixeight: added several opcodes [Roberto Zandona']

Simplified UML parameters, as follows: [Aaron Giles]
 * immediates can be passed raw, no IMM() wrapper required (and it's
    gone now)
 * fixed integer registers now use constants I0,I1,I2,etc instead of
    IREG(0),...
 * same for float registers F0,F1,F2,etc instead of FREG(0)
 * dynamic integer/float regs use inline functions ireg(),freg()
 * MEM macro is now a lower-case inline function mem()

Fixed a trivial boot vector program init bug in Lethal Thunder /
Thunder Blaster [Angelo Salese]

Added an opcode in Mystic Riders decryption table, makes BGMs to work
in mysticrib [Angelo Salese]

Added sound reset line for Irem M92 HW, and safely removed
GAME_IMPEFECT_SOUND flag to Perfect Soldiers [Angelo Salese]

Fix a bug in makedep which will caused includes on the first line of
the file like in skyraid.h to be ignored. [Couriersud]

Added working sound to Dogyuun and V-Five 
[Roberto Zandona', Alex Jackson]

toaplan2 improvements  [Alex Jackson]
 * Figured out which bit controls V25 RESET in each game by comparing
    the 68000 code
 * Added a comment about fixeight's I/O map, which we'll have to
    determine once we start decrypting it
 * Put #ifndef USE_ENCRYPTED_V25S around some simulation crap that was
    hiding in fixeight's DRIVER_INIT

segapcm.c: Fixed loop address, hangon engine sounds better now. Also
included documentation in source of known register functions. [hap]

madalien.c: Fixed highlighting in tunnel. [Qwi Jibo]

Fixed regressed flip screen support in Toaplan 2 games [David Haywood]

Changed the discrete sound system to be class based: [Couriersud]
 * Former modules are now classes being derived from
    discrete_base_node
 * Moved all context variables to be private class members.
 * For "standard nodes", DISCRETE_CLASS_STEP_RESET provides a simple
    way to implement a node.
 * All information around a node (additional info struct, constants
    and input mappings may be defined on a class level centralizing
    all information. An example is dss_inverter_osc.
 * Significantly simplified the task handling.
 * Fixed a bug which would not buffer secondary outputs.
 * All lists in sound/disc_* are now based on dynamic_array_t
    (discrete.h)
 * Changed all drivers to reflect the changes.
 * Custom modules are now just another node class.
 * No performance hit observed due to these changes.

Improvements to goldnpkr.c [Roberto Fresca]
 * Lots of changes to get working the Video Klein games.
 * Renamed witchcde to witchjol --> Jolly Witch (Export, 6T/12T ver
    1.57D).
 * Added Wild Witch (Export, 6T/12T ver 1.74A).
 * New video hardware and machine driver for Video Klein's extended
    tiles games.
 * Added Dallas DS1210 + battery backed RAM support to the Video Klein
    CPU boxed games.
 * Improved inputs for Jolli Witch and Wild Witch. Added the game
    selector switch.
 * Cleaned up some witch card sets.
 * Added technical and game notes.

m90: modified interrupt [Alex Jackson]

Replaced BSMT2000 HLE emulator with emulation of the original
TMS32015.
[Dr. Decapitator, Andrew Gardner, Quench, Guru, Ernesto Corvi, Peter
Grounds, Lord Nightmare, Aaron Giles]

M6801 changes: [Curt Coder]
 * added operating mode enum
 * fixed port writes
 * implemented SCI status follower bits

toaplan2:
 * Found a few more fixeight opcodes, by matching code in the
    interrupt routines with batsugun [Alex Jackson]
 * Corrected fixeight V25 address map (the YM2151 and OKI6295 are at a
    different location than the other games) [Alex Jackson]
 * Preliminary implementation of V25/V35 port output [Alex Jackson]

Optimized RC_INTEGRATE and TRANSFORM. Nice improvement. [Couriersud]

Changed all "output[0] = ..." into "set_output(0, ..)" calls. Rewrote
modules using "output[0]" as a latch as well. The purpose is to
decouple nodes from the discrete infrastructure implementation.
[Couriersud]

Added a virtual stream update function to the device sound interface.
Added a new stream_create that takes fewer parameters and calls the
device's stream update. Removed the stream update stub template.
Updated BSMT2000 and OKIM6295 to use the new interface for their
streams. [Aaron Giles]

fixeight: hooked up EEPROM [David Haywood]

Added preliminary working sound to beezer. [Lord Nightmare]

M6801 changes: [Curt Coder]
 * implemented port 3 strobed mode
 * fixed port writes some more

Discrete subsystem now uses the sound_device stream_update function.
[Couriersud]

Improve nmi handling in mouser. [Couriersud]

i8085.c: Fixed inte callback not being called when the IE flag was
cleared after the CPU received an interrupt. This fixes interrupts in
n8080.c helifire and spacelnc. [Qwi Jibo]

raiden2: Write down the rather weird results of a series of tests
[dox, O. Galibert]

Added "-syncrefresh" option to osd/sdl. This will *limit* the game
speed to the video refresh rate and works in -mt mode as well. The
option has an effect only if "-waitsync" is specified.
[Couriersud, Chris Kennedy]

Fixed 01004: chinhero, chinhero2, chinherot: There is a bad sprite on
level 7 of the game. [Corrado Tomaselli, Pierpaolo Prazzoli] Added
sprites wrap around-y in Chinese Hero to fix gorilla sprites entering
from the left [Pierpaolo Prazzoli]

fixeight: decrypted all used opcodes and added EEPROMS for all
countries; now the sound works
[Andrew Jackson, David Haywood, Roberto Zandona']

fixeight: cleaned up the inputport for fixeight (no dips)
[David Haywood]

ARM7 updates [Tim Schuerewegen]:
 * Disable 26-bit back compatibility for ARM7 variants other than
    ARM7500
 * Fix carry flag issue on add/subtract in ARM mode

cb2001: reworked interrupt [Alex Jackson]

720 - added Driver Configuration option to allow the controls to be
set to Real 720 Controller Input; fake joystick; or fake spinner.  It
defaults to fake spinner for mouse/spinner use. [Derrick Renaud]

Changed the Analog Controls menu to only list controls selected in the
Driver Configuration. [Derrick Renaud]

ARM7 updates [Tim Schuerewegen]:
 * Fixed "MOV x, R15, LSL #y" form as tested by ARMWrestler
 * Added unimplemented Thumb MOV variant used by GBA Moto GP

Reorganized megadrive/sms sourcefiles for better sharing between
MAME/MESS. [Fabio Priuli]

NEC DSP updates [R. Belmont, byuu, Dr. Decapitator]:
 * Now supports uPD7725 and uPD96050
 * Hooked up SNES common code to use uPD96050 for ST-010/011
 * Removed ST-010 HLE simulation

Display suggestions in case commands that require game name are
called and there were no matching games  [Miodrag Milanovic]

Carved out a discrete_sound_device from discrete_device. This now has
all the stream related code. discrete_device thus now contains all the
generic code and may be used going forward to implement not sound
related use cases. [Couriersud]



New games added or promoted from NOT_WORKING status
---------------------------------------------------
Mr. Kicker [Pierpaolo Prazzoli]
X-Plan [Bicycle Repair Man, Luca Elia]
Penfan Girls [hap, N. Francfort, Smitdogg, The Dumping Union]
Witch Card (Video Klein CPU box) [Roberto Fresca]
Jolli Witch (Export, 6T/12T ver 1.57D) [Roberto Fresca]
Wild Witch (Export, 6T/12T ver 1.74A) [Roberto Fresca, Team Europe]



New clones added
----------------
Sega Touring Car Championship (Newer) [briantro]
Sega Touring Car Championship (Unknown Revision) [Brian Troha]
Mahjong Man Guan Da Heng (Taiwan, V125T1) [Luca Elia]
Zero Team Suicide Revival Kit [Angelo Salese]
Bombjack Twin (prototype? with adult pictures)
  [ranger_lennier, Smitdogg, The Dumping Union]
Sexy Parodius (ver AAA) [Tormod]
Ring of Destruction: Slammasters II (Asia 940831)
  [john666, Smitdogg, David Haywood, The Dumping Union]
Street Fighter Alpha 2 (USA 960430)
  [Ricky74, Layne, Smitdogg, The Dumping Union]
Football Champ (World, bootleg) [Clawgrip] (not working)
Gekirindan (Ver 2.30 1995/09/21)
  [Corrado Tomaselli, J. Bijl, The Dumping Union]
1943: Battle of Midway (bootleg, hack of Japan set)
  [Smitdogg, The Dumping Union]
Road Riot 4WD (set 1, 13 Nov 1991)  (not working)
  [Smitdogg, The Dumping Union]
Scramble (bootleg?) [Roberto Fresca, Team Europe & Hal9k]
Zero Target (World, CW)
  [ranger_lennier, B. Sparks, Kevin Eshbach, Smitdogg, The Dumping Union]



New games marked as GAME_NOT_WORKING
------------------------------------
X-Plan [Bicycle Repairman]
Fantasy Zone (Mega-Tech, SMS based) [Ace]
Brave Fire Fighters [Guru]
NASCAR Racing [Guru]
Lucky Lady (Wing, encrypted) [Roberto Fresca, Team Europe & Willi.O]
ATV Track
  [hap, ANY, ranger_lennier, dopefishjustin, gamerfan, gatt9, N.
   Francfort, Smitdogg, The Dumping Union, David Haywood]
