0.142u3
-------


MAMETesters Bugs Fixed
----------------------
- 04320: [Crash/Freeze] Many sets in mpu4drvr.c: Crash: Integer Divide
         by Zero (J. Wallace)
- 01893: [Crash/Freeze] mk4: MK4 hangs in demo mode after about 5
         mins/matches. (Phil Bennett)
- 04334: [Graphics] wiz: Missing sprites makes game unplayable 
         (Angelo Salese)
- 04326: [Graphics] Many games in cave.c: Graphics corruption 
         (Alex Jackson)
- 03103: [Color/Palette] all sets in mrdo.c: The color of "SCENE4" is
         inaccurate. (kunikuni)
- 04325: [Documentation] madrace: Wrong production year. 
- 04304: [Graphics] captaven: Color glitch on scrolling ocean on 
         Stage 2 (David Haywood)

Source Changes
--------------
Removed deprecat.h dependancy and updated irqs accordingly from the
following drivers: [Angelo Salese]
8080bw.c airbustr.c albazg.c argus.c aristmk4.c armedf.c atarifb.c
avalnche.c battlex.c bigevglf.c bionicc.c bionicc.c bishi.c bladestl.c
blockout.c blueprnt.c bmcbowl.c bogeyman.c bottom9.c bsktball.c
bublbobl.c buggychl.c bwing.c changela.c chqflag.c circus.c cischeat.c
cloak.c commando.c cosmic.c cshooter.c darkmist.c dbz.c deadang.c
destroyr.c discoboy.c djmain.c docastle.c dogfgt.c dogfgt.c dooyong.c
dorachan.c dragrace.c enigma2.c equites.c esd16.c espial.c exedexes.c
exidy.c expro02.c fastfred.c finalizr.c firetrap.c flower.c flstory.c
gberet.c gng.c goindol.c gsword.c gunsmoke.c itech32.c jack.c jack.c
kyugo.c ladyfrog.c liberatr.c m72.c matmania.c megaplay.c meijinsn.c
metlclsh.c mirax.c mjsister.c mlanding.c mouser.c namcos2.c namcos21.c
naughtyb.c nbmj8688.c nbmj8891.c nova2001.c overdriv.c pacman.c
paradise.c photon2.c polepos.c popper.c retofinv.c rollrace.c
route16.c sbugger.c segag80r.c segas18.c seta.c shisen.c slapfght.c
snk6502.c solomon.c sonson.c speedbal.c srmp2.c srmp2.c srumbler.c
sstrangr.c strnskil.c suna8.c suprloco.c tagteam.c taito_l.c tomcat.c
tsamurai.c tunhunt.c vastar.c vigilant.c vulgus.c wecleman.c
wheelfir.c wiz.c xxmissio.c zn.c zodiack.c

Fixed sprite regression in expro02.c [Angelo Salese]

Converted Taito_L driver to use AM_SHARE macro [Angelo Salese] 

Removed sound hacks in Evil Stone, fixing sound drop if you die at
level 1 boss [Angelo Salese]

intelfsh.c: Added support for Fujitsu 29DL16X. [Sandro Ronco]

Fixed i86/i386 POP SP and POP ESP thanks to bug report for Xenix boot
by bs666 [Miodrag Milanovic]

Collapsed device_config and device_t into one class. Updated all
existing modern devices and the legacy wrappers to work in this
environment. This in general greatly simplifies writing a modern
device. [Aaron Giles]

psx.c: adjusted MDEC timing to avoid lockups. Most FMVs now have
fluent video. [R. Belmont]

Fixed Z80STI interrupts. [Curt Coder]

Fixed I8255 interrupt enable. [Curt Coder]

Fixed reset register bit masks in RP5C01 and RP5C15. [Curt Coder]

Added 3.5" ED floppy drive type. [Curt Coder]

Naomi / Triforce / Chihiro documentation update [f205v]

Fixed protection read-back registers 0x07 and 0x0e / 0x0f in k051733
math chip, finally fixing gameplay issues in Chequered Flag. 
[Angelo Salese]

konamigv: Documentation updates [Guru]

diimage.c: fix uninitialized variables found by Valgrind [R. Belmont]

mc146818: Fix uninitialized variable found by Valgrind [R. Belmont]

Fixed inputs and removed digital hacks in Cisco Heat driver
[Angelo Salese]

Added MCCS1850 RTC emulation. [Curt Coder]

Added shifter display to Cisco Heat driver [Angelo Salese] 

Removed cheesy hack to F1 GP Star 2 irq communications [Angelo Salese]

Fix second adpcm player in games using SEIBU_ADPCM [R. Belmont]

Made k051733 RNG to behave like an adder, improves pseudo-random
events in Fast Lane [Angelo Salese]

Tentative experiment for Hot Chase gameplay speed ... still not 
perfect though (especially noticeable with sound) [Angelo Salese]

Reimplemented devcb using delegates and classes. Unified the logic for
identifying targets and simplified the code. [Aaron Giles]

naomi: Abstract the maple and jvs interfaces into a set of devices
[O. Galibert, MetalliC, Tormod, D. Knute]

Started unifying sprite implementations for setax001/x002 chips
[David Haywood]

drcbex64: Fix op_debug implementation [O. Galibert]

Add Puzznic MCU dump and added a PAL as NO_DUMP. The MCU still needs
to be properly hooked up. [Smitdogg, The Dumping Union, Lord
Nightmare]

naomi: Add jvs command 0x32, fixes Crazy Taxi and Virtua Tennis 2
booting [O. Galibert]

Added input button labels for Midway T-Unit driver [Joe Caporale]

De-stateized the NB1414M4 routines, and converted the correlated Armed
F text tilemap to be 8-bits [Angelo Salese]

Hooked up NB1414M4 to Ninja Emaki, greatly improving gfxs in it
[Angelo Salese]

Implemented serial type scrolling for Youma Ninpou Chou bootlegs
[Angelo Salese]

Support for dynamic devices added to the core. [Miodrag Milanovic]
 * Added slot and slot card interfaces
 * Added SLOT_INTERFACE macros in order to simplify device adding
 * Added new menu option "Slot Devices" and support to change device
    in runtime
 * Updated emuopts to support command setting of slot cards

Update clifront and added listslots option to display available
slots and device options for each one [Miodrag Milanovic]

mpu4.c: Started adding support for the Crystal Gaming program card,
and the link keys for setting parameters. [J Wallace]

6840ptm.c: Fixed mode check in set_gate() [J Wallace]

srcclean.c: srcclean should remove invalid chars only for source files
which are not xml (softlists have UTF-8 characters) [Fabio Priuli]

Hooked up proper sound program in Combat School bootleg [Angelo
Salese]

Moved format handling and all formats to separate library
[Miodrag Milanovic]

Converted PlayStation DMA to an internal device to the CPU core. DMA
to external devices can be set in the machine config, the old calls
are still there until the rest of the code is converted. [smf]

Added support for default NVRAM in MCCS1850. [Curt Coder]

Various Irem M92 / M107 fixes [Alex Jackson]
 * Hooked up sound CPU interrupts properly, using the V35 builtin
    interrupt controller, rather than generating the vectors in the
    driver.
 * Cleaned up ROM mirroring, using AM_REGION macros in the address
    maps instead of memcpy()ing all over the place in the
    DRIVER_INITs.
 * Converted bankswitching to use configured banks. Only configure the
    banks and install the bankswitch WRITE_HANDLER in the games that
    actually use it (i.e. those with a full megabyte of program ROM).
    This and the previous change make the drivers a lot less confusing
    to look at... I hope.
 * Converted both drivers to use a scanline timer device instead of a
    hand-rolled one.
 * Added save state support to m92.c. Everything necessary was already
    saved, I just had to add the tag. However, presumably due to the
    core emu_timer breakage (MT 4330, 4331) the save states don't
    actually work at the moment. I've already reported this as MT
    #4333
 * Added GAME_MECHANICAL tag to wpksoc and clone

Converted Ginga Ninkyouden to use proper 6840 PTM device
[Angelo Salese]

Fixed missing sprite regression in the Wiz driver [Angelo Salese]

chdman: Handle track type 6 in .nrg files [R. Belmont]

Compile fix for kFreeBSD [Christian Marillat]



New games added or promoted from NOT_WORKING status
---------------------------------------------------
Chequered Flag [Angelo Salese]
Super Wing [Tomasz Slanina, Wulfman]


New clones added
----------------
Witch Card (German, WC3050, 27-4-94) [Roberto Fresca, Team Europe]


New games marked as GAME_NOT_WORKING
------------------------------------
Quizard Rainbow 4.0  [Team Europe]
Frank 'n' Stein (unencrypted) [J Wallace]
Mahjong Maina - Kairakukan he Youkoso [alien_mame, The Dumping Union]
The Nanpa [alien_mame, The Dumping Union]
Cospure Tengoku 7 - Super Co-gal Grandprix
  [alien_mame, The Dumping Union]
Fudol [alien_mame, The Dumping Union]



0.142u2
-------


MAMETesters Bugs Fixed
----------------------
- 03552: [Documentation] kodure: Kodure Ookami vs. Kozure Ookami
         naming conventions (Angelo Salese)
- 04314: [Documentation] lca, lca2: Wrong description.
- 04191: [Sound] dynablstb: No audio (Alex Jackson)
- 02087: [Sound] qbert, qbertqub and clones: "Hello. I'm turned on."
         ... missing, again. (Robbbert)
- 04307: [Documentation] jokrz_l6, jokrz_l3: Wrong description.
- 02072: [Graphics] mooncmw, spcdraga, mooncrgx: Corrupt graphics on
         3rd and 4th stages (Robbbert)

Source Changes
--------------
Implemented irq ack mechanism to Armed Formation HW games [Angelo
Salese]

Hand-fixed bit-rot bit in Terra Force bootleg, fixing the attract mode
crash [Angelo Salese]

Fixed emulation of the extra z80 in Terra Force bootleg set (used as a
replacement for the protection), promoting it to working [Angelo
Salese]

Implemented MCU simulation to terrafu / terrafa [Angelo Salese]

Hooked up text protection simulation to Kozure Ookami, allowing it to
display scoring during gameplay and copyright screens [Angelo Salese]

Implemented proper FG scroll latching in Kozure Ookami, fixing an
offsetted layer at the gameplay intro screen [Angelo Salese]

taito_b.c - Added PLD dumps for qzshowby.  [Tafoid]

Hooked up 1414M4 emulation to Legion [Angelo Salese]

Hooked up the 1414M4 chip emulation for Crazy Climber 2 [Angelo
Salese]

Created device_rtc_interface which can be used to initialize RTC's to
a certain date/time at driver startup, useful for regression testing.
Implemented the interface in most of the modern RTC devices. Note:
this is not yet plumbed down to the command line. [Curt Coder]

renamed Namco System 11 clones based on country code & version. [smf]

SDL: fix backwards texture rectangle option [AWJ]

Hooked up NB1414M4 priority bit, fixing video text priority in all the
games in the Armed F driver [Angelo Salese]

Merged 86 Lions inside Aristocrat Mk-4 driver [Angelo Salese]

Various improvements to m90 driver [AWJ]: 
 * Fixed MT bug 4191 (dynablstb: No audio) 
 * Hooked up sample playback in bbmanw and clones and removed
   GAME_IMPERFECT_SOUND flag (actually, bbmanwj had working samples
   already and never should have been flagged in the first place)
 * Use generic_pulse_irq_line() to generate interrupts on the V35,
   instead of the completely silly and deprecat.h thing I was doing
   before. 
 * Made the same fix to cb2001.c while I was at it.
 * Fixed some spelling mistakes in the inputs. 
 * Converted quizf1 to modern bankswitching with configured banks. 
 * Made quizf1 and bomblord endian-safe, with assistance from 
   R.Belmont.
 * Added save state support.

Removed deprecat.h usage in m90 driver [Angelo Salese]

Implemented RAM-based sprite clut in Armed F driver, used for color
cycling effects in all games of this HW [Angelo Salese]

Provided a compact flash dump for Alien - The Arcade Medal Edition
[Smitdogg, The Dumping Union]

Fixed various things in Buster, allowing it to boot into gameplay
[Angelo Salese]

Merged Tatakae Big Fighter into Armed F driver [Angelo Salese]

Redumped terrafb bitrotted rom [Bill D., The Dumping Union]

astring: Fix build on NetBSD and other systems where toupper() is a
macro [Thomas Klausner]

Implemented irq ack mechanism and fixed CPU clock speeds in Cop 01 and
Mighty Guy, this fixes last boss crashes in Mighty Guy [Angelo Salese]

es5503: Properly mask oscillator enable bits when setting. 
[R.Belmont]

Hand-tuned sound frequencies in Cop 01 based off an audio reference
[Tafoid]


New games added or promoted from NOT_WORKING status
---------------------------------------------------
Mighty Guy [Angelo Salese]


New clones added
----------------
Tekken 2 (TES3 VER.D) [atchoo, Smitdogg, The Dumping Union, smf]
Soul Edge (SO2/VER.A) [f205v, Smitdogg, The Dumping Union, smf]
Soul Calibur (SOC13 VER.C) [f205v, Smitdogg, The Dumping Union, smf]
Tekken Tag (TEG2 VER.C1) [f205v, Smitdogg, The Dumping Union, smf]
Libero Grande (LG1 VER.A)
  [B. Munger, S. Ruiz, Smitdogg, The Dumping Union] (not working)
Saint Dragon (set 2) [Tirino73] (not working)


New games marked as GAME_NOT_WORKING
------------------------------------



0.142u1
-------


MAMETesters Bugs Fixed
----------------------
- 01994: [Crash/Freeze] birdtry: Birdie Try - Game locks up after
         first hole. (Angelo Salese)

Source Changes
--------------
Added screen raw params and irq ack to the dec0 driver, fixing hole 1
hang in Birdie Try and improving fade in/out effects for Boulder Dash
[Angelo Salese]

Funworld driver updates: [Roberto Fresca]
 * Complete support for Witch Royal, from Video Klein.
 * Reworked the button-lamps layout to get the hold buttons more
    centered.

Eliminates the extern variables from atarimo video core, in order to
remove a significant source of AM_BASE macros. [Atari Ace]

Converted astrocde/kaneko16/namcos23/suprnova to driver_device
[Atari Ace]

Converted Taito F3 video chip (TC0630FDP) to have a parallelism of
16-bit [Angelo Salese]

Converted 2 Minutes Drill driver to use Taito F3 video chip, this
hugely improves graphics in it [Angelo Salese]

Added irq ack and fixed sound chip type to be YM2610B for 2 Minutes
Drill [Angelo Salese]

Dumped the DVD image for bikiniko [alien_mame, The Dumping Union]

Added work-around for crowd gfxs in Taito F3 football games (Taito Cup
Finals, International Cup '94, Taito Power Goal and clones), until a
better information is found about it [David Haywood]

softlist: moved software list handling (in the Internal UI) to a
separate source, and made the code more similar to the File Manager
handling code. [Fabio Priuli]

CPS-3 update [Team CPS-1]:
 * Added Street Fighter III: New Generation Hispanic BIOS rom CD
    version
 * Added a detailed table of all known releases until now with usefull
    notes to identify new Cart Regions/CD Revisions
 * Renamed some CHDs to use the new Catalog # standard

uiswlist.c: added a switch to choose between shortname order or
description order for softlist entries (in the Internal UI), and
adapted the char input code to match shortnames or descriptions
accordingly [Fabio Priuli]

sc61860 cpu - fix for crash and cleanup, replace for internal ram
accesses with function calls to help further debug the core in the
future [Atari Ace]

cartslot.c/chd_cd.c: added support for a callback function to test
softlist sharedfeat (e.g. 'compatibility') and display a warning
message accordingly. updated cdi.c as an example [Fabio Priuli]

Decrypted 3 Super 8 program ROM [Lord Nightmare, Kevtris]

cassette.c/flopdrv.c: added support for a display info callback
function [Miodrag Milanovic]

corona/galaxian/namcos21/namcos22/namcos23/psikyosh/quizo/sigmab98 to
driver_device.  [Atari Ace]

Convert scramble/galaxold to driver_device  [Atari Ace]

Audio device additions:  [Atari Ace]
 * exidy440/m72/segasnd are converted to legacy devices.
 * cage/dcs/williams variables are restructured internally to resemble
    a device, simplifying a future device conversion.  Some AM_BASE
    macros are eliminated as well.
 * taito_en has minor changes to eliminate an AM_BASE macro.

Heavily improved 3 Super 8 emulation, and implemented NMI acknowledge
mechanism into the Super Poker driver [Angelo Salese]

i286 - Fixed protected mode boundary check [Miodrag Milanovic]

naomibd: Fix collision with system macro on NetBSD [Thomas Klausner]

Implemented PAL-like prom read-back in 4 En Raya [Angelo Salese]

Fixed Pururun's audio pitch/speed to match that of a reference video. 
[Tafoid]

tms5220.c: updates to comments and nonstandard feature defines.
[Lord Nightmare]

8237dma - Added cascade mode support [Wilbert Pol]

pic8259 - Added support for cascade mode, updated interface in all
drivers [Miodrag Milanovic]

upd7725.c: Implementation of the p0 and p1 output bits as device
lines; preliminary implementation of INT input line. [Lord Nightmare]

Replaced mamedriv.c with a new driver list mechanism that is generated
by the build tools. The emulator core now expects the presence of a
file called src/$(TARGET)/$(SUBTARGET).lst which is just a raw list of
driver names, one per line. C and C++ comments are still permitted.
This file is parsed by a new build tool makelist which extracts the
driver names, sorts them, and generates a file called drivlist.c,
which is consumed by the core. [Aaron Giles]

Added new osdcore function osd_malloc_array() which is identical to
osd_malloc() but obviously hints that the underlying allocation is for
an array. Updated all callers to use the appropriate form. Modified
the Windows allocator to only use guard pages for array-style
allocations, allowing us to enable them once again in debug builds.
[Aaron Giles]

Created new static class driver_list to wrap accesses to the list of
available drivers. Improved speed of driver lookups by relying on the
presorting done by makelist. [Aaron Giles]

Created helper class driver_enumerator as a helper for iterating
through the list of drivers. This class supports basic filtering and
iteration, and also serves as a temporary cache of machine_configs.
[Aaron Giles]

Created cli_frontend object to wrap all the CLI handling code in
clifront.c. Updated/simplified all the code to take advantage of the
driver_enumerator. [Aaron Giles]

Created media_auditor object to wrap all the auditing functions in
audit.c. Updated all users to the new interface. Note that the new
auditing mechanism is slightly out of sync with the romload code in
terms of finding ROMs owned by devices, so it may mis-report some
issues until the new ROM loading code is in. [Aaron Giles]

Added concept of a per-device searchpath. For most devices, their
searchpath is just the short name of the device. For driver_devices,
the searchpath is driver[;parent[;bios]]. This searchpath will
eventually be used by the rom loader to find ROMs. For now it is used
by the media auditor only. [Aaron Giles]

Created info_xml_creator object to wrap all the info generation
functions in info.c. Converted the file to C++ and cleaned up the
input processing code. [Aaron Giles]

model2.c: Corrected the revision level for Top Skater (USA) set
[The Dumping Union]

Various improvements to the Konami Viper driver [Ville Linde]

midqslvr: Add some hardware information [O. Galibert]

Added reverse-spin support to the stepper motor simulator
[James Wallace]

mpu4.c: Documented MOD 4 OKI program card ROM banking and improved the
BwB characteriser emulation. [James Wallace]

Fixed the I/O address in Intel 8257 DMA operations. [Curt Coder]

Fixes for non-native SDL builds on OS X [Paulo Cabral]

Added "Mandatory artwork is missing" error [Oliver Stöneberg]

Implemented 16-bit device callbacks. [Curt Coder]

Fix loading fonts on MacOSX. [Couriersud]

Delegates 2.0 implementation. Resdesigned how delegates work to make
them more flexible and simpler to use. Got rid of the proto_delegates
altogether in favor of supporting delegates that are bound to NULL
objects. Added a front-end template that supports "natural" syntax
favored by libraries like boost. Added support for static functions
that take reference parameters instead of pointer parameters for the
object type. Updated all delegate users in the system to the new
syntax. [Aaron Giles]

Changed the DIRECT_UPDATE_HANDLER to take a machine reference like
everything else in the system. Updated all users. [Aaron Giles]

Changed the FUNC() macro to automatically put an & in front of the
item passed. In general this works transparently, however it does have
the nice side-effect of catching situations where a variable is passed
instead of a function name. Fixed those cases to push the naming
upstream so that the name is now provided properly. Also added a
FUNC_NULL macro since FUNC(NULL) no longer works. [Aaron Giles]

tms5220.c: partially fixed perfect interpolation hack, disabled by
default. [Lord Nightmare]

segas24: Start untangling the Vogon poetry Atari Ace left is his wake.
Apply the new timing implementation per cgfm's analysis. Gain ground
is going to be stuck in free play mode. [O. Galibert]

tms5220.c: fixed perfect interpolation hack the rest of the way, now
it works as it did before 0.140 or so. [Lord Nightmare]

tms5220.c: improve perfect interpolation hack slightly, should be less
noisy after inhibit frames. [Lord Nightmare]

New games added or promoted from NOT_WORKING status
---------------------------------------------------
Major Poker (v2.0) [Roberto Fresca, Tomasz Slanina, Rob Ragon]
Witch Royal (Export version 2.1) [Roberto Fresca, Team Europe]
Water-Nymph (Ver. 1.4) [Team Europe, Luca Elia]


New clones added
----------------
Silent Scope (ver xxC, Ver 1.30)  (not working) [Alex Romero]
Street Fighter III: New Generation (Hispanic 970204) 
 [Bill D., The Dumping Union]


New games marked as GAME_NOT_WORKING
------------------------------------
Racing Jam: Chapter 2 (EAE) [RetroRepair]
Thrill Drive (EAA) [RetroRepair]
Alien: The Arcade Medal Edition
  [Yohji, Tormod, Smitdogg, The Dumping Union]
Home Run Classic [Mariusz Wojcieszek]
Country Club Classic [Mariusz Wojcieszek]
Trap Shoot Classic [Mariusz Wojcieszek]
Nintendo FamicomBox  [Kevin Horton]
MPU3 Unit Test (Program 5) [James Wallace]
Hyper Viper [James Wallace]
